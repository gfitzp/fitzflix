{% extends "base.html" %}

{% block app_content %}
<h2 class="mt-2 mb-n2">{{ title }}</h2>
<hr>
{% if files %}
	<nav aria-label="...">
		<ul class="pagination">
			<li class="page-item{% if not prev_url %} disabled{% endif %}">
				<a class="page-link" href="{{ prev_url or '#' }}" tabindex="-1">Previous</a>
			</li>
			{% if pages %}
			{% for page in pages.iter_pages() %}
				{% if page %}
					{% if page == pages.page %}
						<li class="page-item active"><a class="page-link" href="{{ url_for('main.files', page=page) }}">{{ page }}</a></li>
					{% else %}
						<li class="page-item"><a class="page-link" href="{{ url_for('main.files', page=page) }}">{{ page }}</a></li>
					{% endif %}
				{% else %}
					<li class="page-item disabled"><span class="page-link align-middle">…</span></li>
				{% endif %}
			{% endfor %}
			{% endif %}
			<li class="page-item{% if not next_url %} disabled{% endif %}">
				<a class="page-link" href="{{ next_url or '#' }}" tabindex="-1">Next</a>
			</li>
		</ul>
	</nav>
	<table class="table table-striped">
		<thead class="thead-light">
			<tr>
				<th scope="col">ID</th>
				<th scope="col">Title</th>
				<th scope="col"></th>
				<th scope="col">File</th>
				<th scope="col">Quality</th>
			</tr>
		</thead>
		<tbody>
			{% for file, quality, feature, movie, tv in files %}
			<tr>
				<th scope="row" class="align-middle">{{ file.id }}</th>
				<td class="align-middle">
					{% if movie %}
						<a href="{{ url_for('main.movie', movie_id=movie.id) }}">{{ movie.tmdb_title if movie.tmdb_title else movie.title }} ({{ movie.tmdb_release_date.strftime('%Y') if movie.tmdb_title else movie.year }})</a>
					{% elif tv %}
						<a href="{{ url_for('main.tv', series_id=tv.id) }}">{{ tv.tmdb_name if tv.tmdb_name else tv.title }}</a>
					{% endif %}
				</td>
				<td class="align-middle">{% if feature.feature_type %}<span class="badge badge-info">{{ feature.feature_type }}</span>{% endif %}</td>
				<td class="align-middle"><a href="{{ url_for('main.file', file_id=file.id) }}">{{ file.basename }}</a></td>
				<td class="align-middle">{% if quality.physical_media %}<span class="badge badge-success">{% else %}<span class="badge badge-light">{% endif %}{{ quality.quality_title }}</span></td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	<nav aria-label="...">
		<ul class="pagination">
			<li class="page-item{% if not prev_url %} disabled{% endif %}">
				<a class="page-link" href="{{ prev_url or '#' }}" tabindex="-1">Previous</a>
			</li>
			{% if pages %}
			{% for page in pages.iter_pages() %}
				{% if page %}
					{% if page == pages.page %}
						<li class="page-item active"><a class="page-link" href="{{ url_for('main.files', page=page) }}">{{ page }}</a></li>
					{% else %}
						<li class="page-item"><a class="page-link" href="{{ url_for('main.files', page=page) }}">{{ page }}</a></li>
					{% endif %}
				{% else %}
					<li class="page-item disabled"><span class="page-link align-middle">…</span></li>
				{% endif %}
			{% endfor %}
			{% endif %}
			<li class="page-item{% if not next_url %} disabled{% endif %}">
				<a class="page-link" href="{{ next_url or '#' }}" tabindex="-1">Next</a>
			</li>
		</ul>
	</nav>
{% endif %}
{% endblock %}